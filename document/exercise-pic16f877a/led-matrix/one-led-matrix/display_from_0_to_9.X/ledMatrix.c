/*
 * File:   ledMatrix.c
 * Author: NGUYEN-DUC-DAT
 *
 * Created on 22 August, 2022, 6:31 PM
 */

//Ma tr?n Led 8x8. Các Led ???c n?i v?i nhau thành 8 hàng và 8 c?t.
//Mu?n cho 1 led sáng thì ta ph?i ??a hàng c?a nó lên 1 và c?t t??ng ?ng
//xu?ng 0

// Quét theo row

// Díplay l?n l??t from 0 to 9

#include "ledMatrix.h"

unsigned char control[] = {0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};
unsigned char data[] = {
                            0xff,0x81,0x7e,0x7e,0x7e,0x7e,0x81,0xff,//0
                            0xff,0x7b,0x7d,0x00,0x00,0x7f,0x7f,0xff,//1
                            //0x3d,0x5e,0x6e,0x76,0x39,0xff,0xff,0xff,//2
                            //0xff,0xc3,0xfb,0xfb,0xc3,0xdf,0xdf,0xc3,      //2
                            //0xff,0xff,0x0d,0x6d,0x6d,0x61,0xff,0xff,
                            //0xff,0xff,0x86,0xb6,0xb6,0xb0,0xff,0xff,
                            //0xff,0xff,0x66,0x66,0x66,0x00,0xff,0xff,
                            0xe7,0xe7,0xe7,0x00,0x00,0xe7,0xe7,0x00,
                            //0xff,0xff,0x06,0x76,0x76,0x70,0xff,0xff,
                            
                            
                            0xff,0xbd,0x76,0x76,0x76,0x89,0xff,0xff,//3
                            0xef,0xe7,0xeb,0x6d,0x00,0x6f,0xef,0xff,//4
                            0xff,0x78,0x7a,0x7a,0xba,0xc6,0xff,0xff,//5
                            0xff,0x81,0x76,0x76,0x76,0x8d,0xff,0xff,//6
                            0xff,0xff,0xfc,0xfe,0xfe,0xfe,0x00,0xff,//7
                            0xff,0x89,0x76,0x76,0x76,0x89,0xff,0xff,//8
                            0xff,0xb9,0x76,0x76,0x76,0x81,0xff,0xff, //9
                            0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00, // turn on all
                            0xff, 0xff,0xff,0xff,0xff, 0xff,0xff,0xff  // turn off all
                        };

void light_character_k(int k)
{
    int n;
    
    COLUMN_LED = 0xFF;
    ROW_LED = 0x00;
    
    for(n=0;n<8;n++)
    {
        ROW_LED = control[n];
        COLUMN_LED = data[k*8 + n];
        __delay_ms(5);
    }
}

void light_from_0_to_9()
{
    int run , loops;
    COLUMN_LED = 0xFF;
    ROW_LED = 0xFF;
    
    while(1)
    {
        for(run=0; run<10; run++)
        {
            for(loops=0; loops<100; loops++)            
                light_character_k(run);
            
            COLUMN_LED = 0xFF;
            ROW_LED = 0x00;
            }
        }
}