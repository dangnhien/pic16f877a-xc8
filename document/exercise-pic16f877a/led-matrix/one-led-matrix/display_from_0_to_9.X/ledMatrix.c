/*
 * File:   ledMatrix.c
 * Author: NGUYEN-DUC-DAT
 *
 * Created on 22 August, 2022, 6:31 PM
 */


// Quet theo hang
// Hien thi lan luot tu 0 den 9
#include "ledMatrix.h"

unsigned char control[] = {0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x08};
unsigned char data[] = {
                        0xff,0x81,0x7e,0x7e,0x7e,0x7e,0x81,0xff,//0
                        0xff,0x7b,0x7d,0x00,0x00,0x7f,0x7f,0xff,//1
                        0x3d,0x5e,0x6e,0x76,0x39,0xff,0xff,0xff,//2
                        0xff,0xbd,0x76,0x76,0x76,0x89,0xff,0xff,//3
                        0xef,0xe7,0xeb,0x6d,0x00,0x6f,0xef,0xff,//4
                        0xff,0x78,0x7a,0x7a,0xba,0xc6,0xff,0xff,//5
                        0xff,0x81,0x76,0x76,0x76,0x8d,0xff,0xff,//6
                        0xff,0xff,0xfc,0xfe,0xfe,0xfe,0x00,0xff,//7
                        0xff,0x89,0x76,0x76,0x76,0x89,0xff,0xff,//8
                        0xff,0xb9,0x76,0x76,0x76,0x81,0xff,0xff //9
                       };

void matrixLed(int k)
{
    int n;
    PORTB = 0xFF;
    PORTC = 0x00;
    for(n=0;n<8;n++)
    {
        PORTB = data[k*8 + n];
        PORTC = control[n];
        __delay_ms(1);
    }
}

void loopRunLed()
{
    int chay = 0,lap;
    PORTB = 0xFF;
    PORTC = 0xFF;
    
    while(1)
    {
        for(chay=0;chay<10;chay++)
        {
            for(lap=0;lap<500;lap++)
            {
            matrixLed(chay);
            }
            PORTB = 0xFF;
            PORTC = 0x00;
            }
        }
}